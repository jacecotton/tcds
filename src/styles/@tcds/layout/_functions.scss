@use "sass:map";
@use "sass:math";
@use "sass:string";
@use "_variables" as *;
@use "../base/_functions" as *;

/**
 * Utility functions for the layout system.
 */

/**
 * A generic getter function for layout maps. Checks that `$unit` is of a
 * supported type (px, rem, or em), then converts the px value stored in the map
 * to rem or em if specified.
 */
@function layout-getter($map, $key, $unit) {
  @if $unit == "px" {
    @return map.get($map, $key);
  } @else if $unit == "em" or $unit == "rem" {
    @return #{math.div(math.div(map.get($map, $key), 1px), 16)}#{$unit};
  } @else {
    @error "\"#{$unit}\" is not a valid unit for \"#{$key}\". Must be \"px\", \"rem\", or \"em\".";
  }
}

/**
 * A getter function for the `$sizes` map (see _variables).
 */
@function size($size, $unit: "px") {
  @return layout-getter($sizes, $size, $unit);
}

/**
 * A getter function for the `$spaces` map (see _variables).
 */
@function space($space, $unit: "px") {
  @return layout-getter($spaces, $space, $unit);
}

/**
 * A getter function for the `$breakpoints` map (see _variables).
 */
@function breakpoint($breakpoint) {
  @return getter($breakpoints, $breakpoint);
}

/**
 * A getter function for the `$layers` map (see _variables).
 */
@function layer($layer) {
  @return getter($layers, $layer);
}